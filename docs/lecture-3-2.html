<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Basic Soil Science (SOIL 2125) Lecture Summaries - Spring 2024 - Lecture 3-2: Soil Parent Materials: Formation, Distribution, and Implications for Minnesota Landscapes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./lecture-3-3.html" rel="next">
<link href="./lecture-3-1.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./lecture-3-1.html">Unit 3: Soil Genesis</a></li><li class="breadcrumb-item"><a href="./lecture-3-2.html">Lecture 3-2: Soil Parent Materials: Formation, Distribution, and Implications for Minnesota Landscapes</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Basic Soil Science (SOIL 2125) Lecture Summaries - Spring 2024</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SOIL 2125 Lecture Summaries</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Unit 2: Soil Processes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lecture-2-8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 2-8: Redoximorphic Features in Soils: Biochemical Processes and Implications</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Unit 3: Soil Genesis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lecture-3-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 3.1: Soil Genesis and Soil Forming Factors: Theoretical Foundation and Development of Modern Theories of Soil Formation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lecture-3-2.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Lecture 3-2: Soil Parent Materials: Formation, Distribution, and Implications for Minnesota Landscapes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lecture-3-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 3-3: Soil Forming Factors - Climate, Organisms, Relief, and Time</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lecture-3-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 3-4: Soil Horizon Nomenclature and Profile Descriptions</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#residual-parent-materials" id="toc-residual-parent-materials" class="nav-link" data-scroll-target="#residual-parent-materials">Residual Parent Materials</a></li>
  <li><a href="#transported-parent-materials" id="toc-transported-parent-materials" class="nav-link" data-scroll-target="#transported-parent-materials">Transported Parent Materials</a>
  <ul class="collapse">
  <li><a href="#sorting-mechanisms-sort-materials-by-particle-size" id="toc-sorting-mechanisms-sort-materials-by-particle-size" class="nav-link" data-scroll-target="#sorting-mechanisms-sort-materials-by-particle-size">Sorting Mechanisms (sort materials by particle size)</a></li>
  <li><a href="#non-sorting-mechanisms-do-not-typically-sort-by-particle-size" id="toc-non-sorting-mechanisms-do-not-typically-sort-by-particle-size" class="nav-link" data-scroll-target="#non-sorting-mechanisms-do-not-typically-sort-by-particle-size">Non-Sorting Mechanisms (do not typically sort by particle size)</a></li>
  </ul></li>
  <li><a href="#glacial-history-and-glacial-till" id="toc-glacial-history-and-glacial-till" class="nav-link" data-scroll-target="#glacial-history-and-glacial-till">Glacial History and Glacial Till</a></li>
  <li><a href="#outwash-and-glaciolacustrine-sediments" id="toc-outwash-and-glaciolacustrine-sediments" class="nav-link" data-scroll-target="#outwash-and-glaciolacustrine-sediments">Outwash and Glaciolacustrine Sediments</a></li>
  <li><a href="#loess" id="toc-loess" class="nav-link" data-scroll-target="#loess">Loess</a></li>
  <li><a href="#colluvium" id="toc-colluvium" class="nav-link" data-scroll-target="#colluvium">Colluvium</a></li>
  <li><a href="#organic-parent-materials" id="toc-organic-parent-materials" class="nav-link" data-scroll-target="#organic-parent-materials">Organic Parent Materials</a></li>
  <li><a href="#minnesota-landscapes-and-parent-materials" id="toc-minnesota-landscapes-and-parent-materials" class="nav-link" data-scroll-target="#minnesota-landscapes-and-parent-materials">Minnesota Landscapes and Parent Materials</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./lecture-3-1.html">Unit 3: Soil Genesis</a></li><li class="breadcrumb-item"><a href="./lecture-3-2.html">Lecture 3-2: Soil Parent Materials: Formation, Distribution, and Implications for Minnesota Landscapes</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Lecture 3-2: Soil Parent Materials: Formation, Distribution, and Implications for Minnesota Landscapes</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Soil parent materials play a crucial role in determining soil properties and are one of the five major factors of soil formation, along with climate, biota, relief, and time. This lecture focuses on the various types of soil parent materials found in Minnesota, their formation processes, and their impact on soil characteristics and landscapes.</p>
</section>
<section id="residual-parent-materials" class="level2">
<h2 class="anchored" data-anchor-id="residual-parent-materials">Residual Parent Materials</h2>
<p>Residual parent materials, also known as residuum, are formed from the weathering of local bedrock in place. The properties of residuum depend on the characteristics of the source rock. For example, sandstone residuum tends to be sandy, while shale residuum is typically fine-textured. In Minnesota, residual parent materials are less common due to the extensive glacial history of the state.</p>
</section>
<section id="transported-parent-materials" class="level2">
<h2 class="anchored" data-anchor-id="transported-parent-materials">Transported Parent Materials</h2>
<p>Most of Minnesota’s soil parent materials have been transported and deposited during the last Ice Age. There are four major mechanisms of transport:</p>
<section id="sorting-mechanisms-sort-materials-by-particle-size" class="level3">
<h3 class="anchored" data-anchor-id="sorting-mechanisms-sort-materials-by-particle-size">Sorting Mechanisms (sort materials by particle size)</h3>
<ul>
<li>Water: Alluvium (fast-moving water from modern rivers and streams; dominated by sands and coarse fragments)</li>
<li>Water: Glaciolacustrine (slow-moving water in large glacial lakes; dominated by clays)</li>
<li>Water: Outwash (fast-moving water from glacial meltwater streams; dominated by sands and coarse fragments)</li>
<li>Wind: Loess (deposited by wind; dominated by silts)</li>
</ul>
</section>
<section id="non-sorting-mechanisms-do-not-typically-sort-by-particle-size" class="level3">
<h3 class="anchored" data-anchor-id="non-sorting-mechanisms-do-not-typically-sort-by-particle-size">Non-Sorting Mechanisms (do not typically sort by particle size)</h3>
<ul>
<li>Glacial Ice: Glacial Till (glacial ice grinds and picks up materials of all sizes; generally unsorted, loamy textures)</li>
<li>Gravity: Colluvium (material transported downhill by gravity)</li>
</ul>
<p>Note: Some parent materials, such as volcanic ash and marine sediments, are not discussed in this lecture as they are less common in Minnesota.</p>
</section>
</section>
<section id="glacial-history-and-glacial-till" class="level2">
<h2 class="anchored" data-anchor-id="glacial-history-and-glacial-till">Glacial History and Glacial Till</h2>
<p>Minnesota has experienced multiple glacial cycles during the Pleistocene, with the most recent glaciation ending approximately 10,000 years ago. Continental ice sheets advanced in lobes, each named after the area it ended or advanced through (e.g., Des Moines Lobe, Superior Lobe).</p>
<p>The Superior Lobe advanced over iron-rich igneous rocks in the northeast, while the Des Moines Lobe advanced over carbonate-rich shales and limestones in the northwest. This difference in provenance resulted in distinct glacial till properties:</p>
<ul>
<li>Superior Lobe till: reddish (7.5YR), sandy loams, sandy clay loams, non-calcareous</li>
<li>Des Moines Lobe till: yellowish (2.5Y), loams, clay loams, silty clay loams, calcareous</li>
</ul>
</section>
<section id="outwash-and-glaciolacustrine-sediments" class="level2">
<h2 class="anchored" data-anchor-id="outwash-and-glaciolacustrine-sediments">Outwash and Glaciolacustrine Sediments</h2>
<p>Outwash plains formed when braided rivers and streams of glacial meltwater deposited sands and gravels. The Anoka sandplain north of the Twin Cities is an example of a large outwash plain.</p>
<p>Glaciolacustrine sediments were deposited in former glacial lakes that existed for hundreds to thousands of years before draining. Glacial Lake Agassiz, which covered much of northwestern Minnesota, Manitoba, and North Dakota, was the largest of these lakes. When these lakes drained, the exposed lacustrine sediments formed flat landscapes with clayey soil textures.</p>
</section>
<section id="loess" class="level2">
<h2 class="anchored" data-anchor-id="loess">Loess</h2>
<p>Loess is a wind-transported parent material dominated by silts. During the last glacial maximum, silts were picked up from large river valleys and deposited as loess in the southeast and southwest parts of Minnesota that were not covered in ice.</p>
</section>
<section id="colluvium" class="level2">
<h2 class="anchored" data-anchor-id="colluvium">Colluvium</h2>
<p>Colluvium is a gravity-transported parent material formed by the downslope movement of materials on hillslopes. It is typically unsorted and can have a wide range of textures depending on the source material.</p>
</section>
<section id="organic-parent-materials" class="level2">
<h2 class="anchored" data-anchor-id="organic-parent-materials">Organic Parent Materials</h2>
<p>Soils that have formed from the accumulation of organic materials, such as peat deposits in northern Minnesota peatlands, are considered to have organic parent materials. These soils, called Histosols, have properties dominated by the characteristics of organic matter.</p>
</section>
<section id="minnesota-landscapes-and-parent-materials" class="level2">
<h2 class="anchored" data-anchor-id="minnesota-landscapes-and-parent-materials">Minnesota Landscapes and Parent Materials</h2>
<p>The distribution of parent materials in Minnesota is closely tied to the state’s glacial history and resulting landscapes:</p>
<ul>
<li>Northeastern Minnesota: Predominantly Superior Lobe glacial till</li>
<li>Central and southern Minnesota: Des Moines Lobe glacial till</li>
<li>Northwestern Minnesota: Glacial Lake Agassiz lacustrine sediments (Red River Valley)</li>
<li>Scattered throughout the state: Outwash plains and organic parent materials (peatlands)</li>
<li>Southeastern Minnesota (Driftless Area): Residual soils with loess cap, older glacial till, and more developed drainage patterns due to the absence of recent glaciation</li>
</ul>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Understanding the distribution and properties of soil parent materials in Minnesota is essential for predicting soil characteristics and interpreting the state’s diverse landscapes. The complex glacial history of Minnesota has resulted in a mosaic of parent materials, each with its unique influence on soil formation and landscape development. By recognizing the relationships between transport mechanisms, particle size sorting, and soil texture, soil scientists can better assess the potential and limitations of soils for various applications.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./lecture-3-1.html" class="pagination-link" aria-label="Lecture 3.1: Soil Genesis and Soil Forming Factors: Theoretical Foundation and Development of Modern Theories of Soil Formation">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Lecture 3.1: Soil Genesis and Soil Forming Factors: Theoretical Foundation and Development of Modern Theories of Soil Formation</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./lecture-3-3.html" class="pagination-link" aria-label="Lecture 3-3: Soil Forming Factors - Climate, Organisms, Relief, and Time">
        <span class="nav-page-text">Lecture 3-3: Soil Forming Factors - Climate, Organisms, Relief, and Time</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>